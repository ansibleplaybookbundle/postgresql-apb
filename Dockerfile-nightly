FROM ansibleplaybookbundle/apb-base:nightly
# MAINTAINER {{ $MAINTAINER }}

LABEL "com.redhat.apb.spec"=\
"IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyBTaGFyZWQgUGFyYW1ldGVycwojIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIwpfcDogJl9wCiAgLSBuYW1lOiBwb3N0Z3Jlc3FsX3Bhc3N3b3JkCiAgICB0eXBl\
OiBzdHJpbmcKICAgIHRpdGxlOiBQb3N0Z3JlU1FMIEFkbWluIFBhc3N3b3JkIChwb3N0Z3JlcyB1\
c2VyKQogICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgcGF0dGVybjogIl5bYS16QS1aMC05\
X34hQCMkJV4mKigpLT08PiwuPzs6fF0rJCIKICAgIHJlcXVpcmVkOiBmYWxzZQogIC0gbmFtZTog\
cG9zdGdyZXNxbF92ZXJzaW9uCiAgICBkZWZhdWx0OiAnOS42JwogICAgZW51bTogWyc5LjYnLCAn\
OS41JywgJzkuNCddCiAgICB0eXBlOiBlbnVtCiAgICB0aXRsZTogUG9zdGdyZVNRTCBWZXJzaW9u\
CiAgICByZXF1aXJlZDogdHJ1ZQogICAgdXBkYXRhYmxlOiB0cnVlCiMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjCl9iOiAmX2IKICAtIG5hbWU6IGNsaWVudF9uYW1lCiAgICB0eXBlOiBzdHJpbmcKICAg\
IHJlcXVpcmVkOiB0cnVlCiAgICB0aXRsZTogQ2xpZW50IG5hbWUKICAgIHBhdHRlcm46ICJeW2Et\
ekEtWl9dW2EtekEtWjAtOV9dKiQiCiAgICBkZXNjcmlwdGlvbjogQSBuZXcgZGF0YWJhc2Ugd2ls\
bCBiZSBjcmVhdGVkIGZvciB0aGF0IGNsaWVudCB3aXRoIHRoYXQgbmFtZS4KICAtIG5hbWU6IGNs\
aWVudF91c2VyCiAgICB0aXRsZTogQ2xpZW50IFVzZXIKICAgIHR5cGU6IHN0cmluZwogICAgbWF4\
bGVuZ3RoOiA2MwogICAgcGF0dGVybjogIl5bYS16QS1aX11bYS16QS1aMC05X10qJCIKICAgIHJl\
cXVpcmVkOiB0cnVlCiAgICBkZXNjcmlwdGlvbjogQSBuZXcgdXNlciB3aWxsIGJlIGNyZWF0ZWQg\
d2l0aCB0aGlzIG5hbWUgYW5kIGdyYW50ZWQgcGVybWlzc2lvbnMgdG8gY29ubmVjdCB0byB0aGUg\
bmV3bHkgY3JlYXRlZCBkYXRhYmFzZS4KICAtIG5hbWU6IGNsaWVudF9wYXNzd29yZAogICAgdHlw\
ZTogc3RyaW5nCiAgICB0aXRsZTogQ2xpZW50IFBvc3RncmVTUUwgUGFzc3dvcmQKICAgIGRpc3Bs\
YXlfdHlwZTogcGFzc3dvcmQKICAgIHBhdHRlcm46ICJeW2EtekEtWjAtOV9+IUAjJCVeJiooKS09\
PD4sLj87OnxdKyQiCiAgICByZXF1aXJlZDogZmFsc2UKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\
IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMK\
dmVyc2lvbjogMS4xCm5hbWU6IHBvc3RncmVzcWwtYXBiCmRlc2NyaXB0aW9uOiBTQ0wgUG9zdGdy\
ZVNRTCBhcGIgaW1wbGVtZW50YXRpb24KYmluZGFibGU6IHRydWUKYXN5bmM6IHJlcXVpcmVkCnRh\
Z3M6CiAgLSBkYXRhYmFzZQogIC0gcG9zdGdyZXNxbAptZXRhZGF0YToKICBkb2N1bWVudGF0aW9u\
VXJsOiBodHRwczovL3d3dy5wb3N0Z3Jlc3FsLm9yZy9kb2NzLwogIGxvbmdEZXNjcmlwdGlvbjog\
QW4gYXBiIHRoYXQgZGVwbG95cyBwb3N0Z3Jlc3FsIDkuNCwgOS41LCBvciA5LjYuCiAgZGVwZW5k\
ZW5jaWVzOgogICAgLSAncmVnaXN0cnkuYWNjZXNzLnJlZGhhdC5jb20vcmhzY2wvcG9zdGdyZXNx\
bC05NC1yaGVsNycKICAgIC0gJ3JlZ2lzdHJ5LmFjY2Vzcy5yZWRoYXQuY29tL3Joc2NsL3Bvc3Rn\
cmVzcWwtOTUtcmhlbDcnCiAgICAtICdyZWdpc3RyeS5hY2Nlc3MucmVkaGF0LmNvbS9yaHNjbC9w\
b3N0Z3Jlc3FsLTk2LXJoZWw3JwogIGRpc3BsYXlOYW1lOiBQb3N0Z3JlU1FMIChBUEIpCiAgY29u\
c29sZS5vcGVuc2hpZnQuaW8vaWNvbkNsYXNzOiBpY29uLXBvc3RncmVzcWwKICBwcm92aWRlckRp\
c3BsYXlOYW1lOiAiUmVkIEhhdCwgSW5jLiIKcGxhbnM6CiAgLSBuYW1lOiBkZXYKICAgIGRlc2Ny\
aXB0aW9uOiBBIHNpbmdsZSBEQiBzZXJ2ZXIgd2l0aCBubyBzdG9yYWdlCiAgICBmcmVlOiB0cnVl\
CiAgICBtZXRhZGF0YToKICAgICAgZGlzcGxheU5hbWU6IERldmVsb3BtZW50CiAgICAgIGxvbmdE\
ZXNjcmlwdGlvbjogVGhpcyBwbGFuIHByb3ZpZGVzIGEgc2luZ2xlIG5vbi1IQSBQb3N0Z3JlU1FM\
IHNlcnZlciB3aXRob3V0IHBlcnNpc3RlbnQgc3RvcmFnZQogICAgICBjb3N0OiAkMC4wMAogICAg\
cGFyYW1ldGVyczogKl9wCiAgICBiaW5kX3BhcmFtZXRlcnM6ICpfYgogICAgdXBkYXRlc190bzoK\
ICAgICAgLSBwcm9kCiAgLSBuYW1lOiBwcm9kCiAgICBkZXNjcmlwdGlvbjogQSBzaW5nbGUgREIg\
c2VydmVyIHdpdGggcGVyc2lzdGVudCBzdG9yYWdlCiAgICBmcmVlOiB0cnVlCiAgICBtZXRhZGF0\
YToKICAgICAgZGlzcGxheU5hbWU6IFByb2R1Y3Rpb24KICAgICAgbG9uZ0Rlc2NyaXB0aW9uOiBU\
aGlzIHBsYW4gcHJvdmlkZXMgYSBzaW5nbGUgbm9uLUhBIFBvc3RncmVTUUwgc2VydmVyIHdpdGgg\
cGVyc2lzdGVudCBzdG9yYWdlCiAgICAgIGNvc3Q6ICQwLjAwCiAgICBwYXJhbWV0ZXJzOiAqX3AK\
ICAgIGJpbmRfcGFyYW1ldGVyczogKl9iCiAgICB1cGRhdGVzX3RvOgogICAgICAtIGRldgo="

RUN pip install psycopg2 && yum -y install postgresql-apb-role && yum clean all

USER apb
